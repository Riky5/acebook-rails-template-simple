
<%# <% @posts.each do |post| %>
  <%# User: <%= User.find(post.user_id).name + User.find(post.user_id).surname %>
  <%# <%= post.message %>
  <%# <% if post.image.attached? %>
  <%# <%= image_tag post.image%>
  <%# <% end %>
 <%# <%= post.created_at %>

<div class="container is-fluid">
  <div class="columns">
    <div class="column"></div>
      <div id="new-post" class="column is-half">

        <div class="container p-4" id="post-section">
          <div id="avatar" class="p-5"></div>
            <div id="post-link" class="container is-fluid">
            
            <h2> <strong>Add a Post:</strong> </h2>
                <%= form_with(model: [ @post, Post.new ], local: true) do |form| %>
                  <p>
                    <%= form.label :message %><br>
                    <%= form.text_area :message %>
                  </p>
                    <%= form.label :image %>
                    <%= form.file_field :image, class: "form-control" %>
                  <p>
                    <%= form.submit %>

                    <submit above>
                  </p>
                <% end %>

            </div>
        </div>

        <% @posts.each do |post| %>
          <%= content_tag :div, id: dom_id(post) do %>
            <div class="container p-5" id="post-container">
              <div class="container post-card p-4">
                <div class="container" id="post-details">
                  <div id="avatar" class="p-5"></div>
                  <div class="container is-fluid">
                    <p id="user-name"><%= User.find(post.user_id).name %> <%= User.find(post.user_id).surname %></p>
                    <p id="created-at"><%= post.created_at %></p>
                  </div>
                </div>
                <div class="message-and-photo p-5">
                  <p class="mb-2"><%= post.message %></p>
                  <% if post.image.attached? %>
                  <%= image_tag post.image%>
                  <% end %>
                  <%# image test %>
                  <%# <%= image_tag("winking-cat.jpg", :alt => "image of my cat") %> 
                </div>
              </div>
              <div class="comments-section p-5">
              <h2><strong> Comments</strong></h2>
                <% post.comments.each do |comment| %>
                  <p>
                    <strong>
                      <%= (User.find(comment.user_id)).name + " " + (User.find(comment.user_id)).surname %>
                    </strong>
                  </p>

                  <p>
                    <%= comment.body %>
                  </p>
                  <% if comment.image.attached? %>
                    <%= image_tag comment.image%>
                  <% end %>
                <% end %>
                <h2> <strong>Add a comment:</strong> </h2>
                <%= form_with(model: [ post, post.comments.build ], local: true) do |form| %>
                  <p>
                    <%= form.hidden_field :user_id, value: current_user.id %>  
                  </p>
                  <p>
                    <%= form.label :body %><br>
                    <%= form.text_area :body %>
                  </p>
                    <%= form.label :image %>
                    <%= form.file_field :image, class: "form-control" %>
                  <p>
                    <%= form.submit %>
                  </p>
                <% end %>
              </div>
           </div>   
        <% end %>
      <% end %>

      </div>
        <div class="column"></div>
      </div>
    </div>
<%# <%= link_to new_post_path do %>
  <%# New post %>
<%# <% end %>

<%# <% end %>